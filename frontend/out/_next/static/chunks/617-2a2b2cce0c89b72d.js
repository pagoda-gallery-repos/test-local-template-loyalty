(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{233:function(t,e,s){"use strict";var a=s(5893);let r=t=>{let{children:e}=t;return(0,a.jsx)("div",{className:"px-6 pt-6 lg:px-8",children:(0,a.jsxs)("nav",{className:"flex items-center justify-between h-12","aria-label":"Global",children:[(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("a",{href:"/",className:"rounded-md bg-purple-400 px-3.5 py-1.5 text-base leading-7 text-white shadow-sm hover:bg-purple-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600",children:"Back to main Page"})}),(0,a.jsx)("div",{className:"hidden lg:flex lg:flex-1 lg:justify-end",children:e})]})})};e.Z=r},8905:function(t,e,s){"use strict";var a=s(5893);let r=()=>(0,a.jsx)("div",{children:"loader"});e.Z=r},4634:function(t,e,s){"use strict";var a=s(5893),r=s(403);let n=t=>{let{programsList:e,details:s=!0}=t;return(0,a.jsx)("div",{className:"mt-2 leading-4 mt-2 overflow-hidden text-left shadow-2xl ring-1 ring-gray-900/5 rounded-2xl",children:(0,a.jsx)("div",{className:" bg-white text-base",children:null==e?void 0:e.map((t,e)=>(0,a.jsxs)("div",{className:"".concat(e%2&&"bg-gray-100"," px-4 py-5 "),children:[(0,a.jsxs)("div",{className:"flex mb-2",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[t.contracts.ft.token_name,(null===r.g||void 0===r.g?void 0:r.g.accountId)===t.accountId?(0,a.jsx)("span",{className:"text-green-500 font-light",children:" - Active"}):!s&&(0,a.jsx)("span",{className:"text-red-500 font-light",children:" - Not Active"})]}),(null===r.g||void 0===r.g?void 0:r.g.accountId)===t.accountId&&(0,a.jsx)("div",{className:"mt-2 ml-4",children:(0,a.jsx)("a",{href:"/customer/".concat(t.accountId),className:"rounded-md bg-indigo-500 px-3.5 py-3 text-base leading-7 text-white shadow-sm hover:bg-indigo-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Open Loyalty Program App"})})]}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs mt-2",children:["accountId: ",(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700",children:t.accountId})]}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs",children:["contract accountId:"," ",(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700",children:t.contracts.ft.account_id})]}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs",children:["token name: ",(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700",children:t.contracts.ft.token_name})]}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs",children:["token symbol:"," ",(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700",children:t.contracts.ft.token_symbol})]}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs",children:["total supply:"," ",(0,a.jsx)("span",{className:"text-sm font-bold text-gray-700",children:t.contracts.ft.token_total_supply})]})]})]},e))})})};e.Z=n},9683:function(t,e,s){"use strict";var a=s(5893);let r=t=>{let{header:e,children:s,variant:r="customer"}=t,n="merchant"===r?"#9089FC":"#f96464",c="merchant"===r?"#FF80B5":"#9afc89";return(0,a.jsxs)("div",{className:"isolate bg-gray-00",children:[(0,a.jsx)("div",{className:"absolute inset-x-0 top-[-10rem] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[-20rem]",children:(0,a.jsxs)("svg",{className:"relative left-[calc(50%-11rem)] -z-10 h-[21.1875rem] max-w-none -translate-x-1/2 rotate-[30deg] sm:left-[calc(50%-30rem)] sm:h-[42.375rem]",viewBox:"0 0 1155 678",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fill:"url(#45de2b6b-92d5-4d68-a6a0-9b9b2abad533)",fillOpacity:".4",d:"M317.219 518.975L203.852 678 0 438.341l317.219 80.634 204.172-286.402c1.307 132.337 45.083 346.658 209.733 145.248C936.936 126.058 882.053-94.234 1031.02 41.331c119.18 108.451 130.68 295.337 121.53 375.223L855 299l21.173 362.054-558.954-142.079z"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"45de2b6b-92d5-4d68-a6a0-9b9b2abad533",x1:"1155.49",x2:"-78.208",y1:".177",y2:"474.645",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:n}),(0,a.jsx)("stop",{offset:1,stopColor:c})]})})]})}),e,(0,a.jsx)("main",{children:(0,a.jsxs)("div",{className:"relative px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"mx-auto max-w-4xl py-32 sm:py-48 lg:py-16",children:s}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]",children:(0,a.jsxs)("svg",{className:"relative left-[calc(50%+3rem)] h-[21.1875rem] max-w-none -translate-x-1/2 sm:left-[calc(50%+36rem)] sm:h-[42.375rem]",viewBox:"0 0 1155 678",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fill:"url(#ecb5b0c9-546c-4772-8c71-4d3f06d544bc)",fillOpacity:".4",d:"M317.219 518.975L203.852 678 0 438.341l317.219 80.634 204.172-286.402c1.307 132.337 45.083 346.658 209.733 145.248C936.936 126.058 882.053-94.234 1031.02 41.331c119.18 108.451 130.68 295.337 121.53 375.223L855 299l21.173 362.054-558.954-142.079z"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"ecb5b0c9-546c-4772-8c71-4d3f06d544bc",x1:"1155.49",x2:"-78.208",y1:".177",y2:"474.645",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:n}),(0,a.jsx)("stop",{offset:1,stopColor:c})]})})]})})]})})]})};e.Z=r},6262:function(t,e,s){"use strict";var a=s(5893);let r=t=>{let{children:e}=t;return(0,a.jsxs)("div",{className:"text-center text-xl font-light text-gray-600",children:[(0,a.jsx)("p",{className:"mt-6 leading-8",children:e[0]}),(0,a.jsx)("h1",{className:"mt-4 text-6xl font-bold tracking-tight text-gray-900",children:e[1]}),(0,a.jsx)("span",{className:"mt-8",children:e[2]}),(0,a.jsx)("div",{className:"mt-6 flex items-center justify-center gap-x-6",children:e[3]})]})};e.Z=r},8748:function(t,e,s){"use strict";s.d(e,{y:function(){return o}});var a=s(5244),r=s(403);let{keyStores:n,connect:c,Contract:l}=s(8447),i="testnet",o=new class{async createAndTransfer(t,e){if(!await this.getKeyPair())throw Error("You need to pass a function call access key to the backend first.");let s=await this.getKeyPair(),r=new n.InMemoryKeyStore;r.setKey(i,this.getAccountName(),s),this.nearConnection=await c({networkId:i,keyStore:r,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"});let o=await this.nearConnection.account(this.getAccountName()),d=new l(o,(0,a.sV)(),{viewMethods:[],changeMethods:["create_and_transfer"]});return await d.create_and_transfer({prefix:e,public_key:t},"300000000000000","100000000000000000000000")}async setKeyPairForManager(t){await this.keyStore.setKey(i,this.getAccountName(),t)}async getKeyPair(){return await this.keyStore.getKey(i,this.getAccountName())}getAccountName(){return(0,a.sV)()}async startUp(){await r.g.startUp()}checkIsProgramActive(){let t=r.g.walletSelector.isSignedIn();return t}constructor(){this.keyStore=new n.BrowserLocalStorageKeyStore}}},8226:function(t,e,s){"use strict";s.d(e,{d:function(){return u}});var a=s(5244),r=s(403),n=s(8748),c=s(3454),l=s(816).Buffer;let{utils:i,providers:o}=s(8447),d=c.env.CONTRACT_NAME,u=new class{async createFungibleToken(t,e,s){let a=await this.createKeyPair();return await this.backend.setKeyPairForManager(a),await r.g.callMethod({contractId:this.contractId,method:"create_factory_subaccount_and_deploy",args:{token_name:t,token_symbol:e,token_total_supply:s,public_key:a.getPublicKey().toString()},deposit:"4989140000000000000000000",gas:"300000000000000"})}async createKeyPair(){return i.key_pair.KeyPairEd25519.fromRandom()}async checkProgramExists(t){return await r.g.viewMethod({contractId:this.contractId,method:"user_has_program",args:{account_id:t}})}async getProgram(t){return await r.g.viewMethod({contractId:this.contractId,method:"user_program",args:{account_id:t}})}async getAllPrograms(){let t=await this.provider.query({request_type:"call_function",account_id:this.contractId,method_name:"get_all_programs",args_base64:"e30=",finality:"optimistic"}),e=JSON.parse(l.from(t.result)),s=[];return e.forEach(t=>{s=[...s,{accountId:t[0],contracts:t[1]}]}),s}getManagerContractId(){return(0,a.sV)()}constructor(){this.contractId=d,this.backend=n.y,this.provider=new o.JsonRpcProvider("https://rpc.testnet.near.org")}}},5244:function(t,e,s){"use strict";s.d(e,{FH:function(){return m},Tz:function(){return u},c3:function(){return x},hc:function(){return i},sV:function(){return h}});var a=s(3416),r=s(3454);let n=r.env.CONTRACT_NAME,c="near.loyalty-program.merchant.id",l=(0,a.kP)("0123456789abcdefghijklmnopqrstuvwxyz",13);function i(){let t="near.loyalty-program.customer.prefix."+d();return null===o(t)&&localStorage.setItem(t,l()),o(t)}function o(t){return localStorage.getItem(t)}function d(){if(null==o(c))throw Error("You need to log in first as a merchant.");return o(c)}function u(t){let e=t.slice(0,-8);localStorage.setItem(c,e)}function h(){let t=d();return t+"-manager."+n}function m(){let t=d();return t+"-ft."+n}function x(){let t=d();return t+".testnet"}},403:function(t,e,s){"use strict";s.d(e,{g:function(){return m}});var a=s(4924),r=s(8447);s(7286);var n=s(6033),c=s(5401),l=s(6715),i=s(6585),o=s(8544),d=s(6675),u=s(5244),h=s(816).Buffer;let m=new class{async startUp(){this.walletSelector=await (0,i.L1)({network:this.network,modules:[(0,d.X)({iconUrl:l.Z}),(0,o.T)({iconUrl:c.Z})]});let t=this.walletSelector.isSignedIn();return t&&(this.wallet=await this.walletSelector.wallet(),this.accountId=this.walletSelector.store.getState().accounts[0].accountId,(0,u.Tz)(this.accountId)),t}signIn(){let t=(0,n.D)(this.walletSelector,{contractId:this.createAccessKeyFor,description:"Please select a wallet to sign in."});t.show()}signOut(){this.wallet.signOut(),this.wallet=this.accountId=this.createAccessKeyFor=null,window.location.replace(window.location.origin+window.location.pathname)}async viewMethod(t){let{contractId:e,method:s,args:a={}}=t,{network:n}=this.walletSelector.options,c=new r.providers.JsonRpcProvider({url:n.nodeUrl}),l=await c.query({request_type:"call_function",account_id:e,method_name:s,args_base64:h.from(JSON.stringify(a)).toString("base64"),finality:"optimistic"});return JSON.parse(h.from(l.result).toString())}async callMethod(t){let{contractId:e,method:s,args:a={},gas:r="30000000000000",deposit:n="0"}=t;return await this.wallet.signAndSendTransaction({signerId:this.accountId,receiverId:e,actions:[{type:"FunctionCall",params:{methodName:s,args:a,gas:r,deposit:n}}]})}async getTransactionResult(t){let{network:e}=this.walletSelector.options,s=new r.providers.JsonRpcProvider({url:e.nodeUrl}),a=await s.txStatus(t,"unnused");return r.providers.getTransactionLastResult(a)}constructor(){(0,a.Z)(this,"walletSelector",void 0),(0,a.Z)(this,"wallet",void 0),(0,a.Z)(this,"network",void 0),(0,a.Z)(this,"createAccessKeyFor",void 0),this.createAccessKeyFor=void 0,this.network="testnet"}}},6601:function(){},5024:function(){}}]);